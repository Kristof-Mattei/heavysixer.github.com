
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>racing and profiling - Mark Daggett's Blog</title>
  <meta name="author" content="Mark Daggett">

  
  <meta name="description" content="I&#8217;ve been experimenting with various ways to profile, and explore JavaScript as it executes in the runtime environment. Mostly I&#8217;ve been &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://heavysixer.github.com/blog/2013/03/01/racing-and-profiling">
  <link href="/favicon.ico" rel="icon">
  
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Mark Daggett's Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1950734-4']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="no-sidebar"  >
  <header role="banner"><hgroup>
  <h1>Mark Daggett's Blog</h1>
  
    <h2><a href="/">Innovator & Bricoleur</a></h2>
  
</hgroup>

</header>
  <nav role="navigation">
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:heavysixer.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><small><a href="https://github.com/heavysixer">Github</a></small></li>
  <li><small><a href="https://twitter.com/heavysixer">@heavysixer</a></small></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Racing and Profiling</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-01T09:08:00-06:00" pubdate data-updated="true">Mar 1<span>st</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>I&#8217;ve been experimenting with various ways to profile, and explore JavaScript as it executes in the runtime environment. Mostly I&#8217;ve been
experimenting with the rKelly and rubyracer gems. Both gems are written by people much smarter than myself so there is lots to learn and
explore inside their source. I was talking to the very friendly <a class="reference external" href="https://twitter.com/cowboyd">Charles Lowell</a>, creator of the rubyracer
and he shared this great snippet with me, which allows you to turn on the v8 profiler while the rubyracer is running. Because this is an
undocumented hook I thought I&#8217;d share it here:</p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">ruby</span> <span class="o">-</span><span class="no">Ilib</span> <span class="o">-</span><span class="no">Iext</span> <span class="o">-</span><span class="n">rv8</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;V8::C::V8::SetFlagsFromString(&quot;--prof&quot;); V8::Context.new() {|c| puts c.eval(&quot;5 + 1&quot;)}; V8::C::V8::PauseProfiler()&#39;</span>
</span></code></pre></td></tr></table></div></figure><p>This will produce a <em>v8.log</em> file wherever you executed the script from. Inside the file there is a gluttonous amount of data, which will
take some time to parse through but in general it looks a bit like this:</p>
<pre class="literal-block">
code-creation,LoadIC,0x127fc3e29140,181,&quot;A load IC from the snapshot&quot;
code-creation,KeyedLoadIC,0x127fc3e29200,181,&quot;A keyed load IC from the snapshot&quot;
code-creation,StoreIC,0x127fc3e292c0,183,&quot;A store IC from the snapshot&quot;
code-creation,KeyedStoreIC,0x127fc3e29380,183,&quot;A keyed store IC from the snapshot&quot;
code-creation,Builtin,0x127fc3e29440,97,&quot;A builtin from the snapshot&quot;
code-creation,Builtin,0x127fc3e294c0,137,&quot;A builtin from the snapshot&quot;
code-creation,Script,0x127fc3e14e20,980,&quot;native string.js&quot;,0x2e87cc50ec50,
code-creation,LazyCompile,0x127fc3e15500,1616,&quot;SetUpString native string.js:940&quot;,0x2e87cc5129c8,
code-creation,LazyCompile,0x127fc3e15be0,472,&quot; native string.js:36&quot;,0x2e87cc512ab0,
code-creation,Script,0x127fc3e15dc0,336,&quot;native array.js&quot;,0x2e87cc512e00,
code-creation,LazyCompile,0x127fc3e15f20,2544,&quot;SetUpArray native array.js:1469&quot;,0x2e87cc5175b0,
code-creation,LazyCompile,0x127fc3e16920,340,&quot;SetUpArray.b native array.js:1482&quot;,0x2e87cc517668,
code-creation,Script,0x127fc3e16b00,552,&quot;native regexp.js&quot;,0x2e87cc5177f0,
code-creation,LazyCompile,0x127fc3e16d40,388,&quot;RegExpConstructor native regexp.js:86&quot;,0x2e87cc518a70,
code-creation,LazyCompile,0x127fc3e16ee0,280,&quot;RegExpMakeCaptureGetter native regexp.js:363&quot;,0x2e87cc519288,
code-creation,LazyCompile,0x127fc3e17000,668,&quot; native regexp.js:364&quot;,0x2e87cc519340,
code-creation,LazyCompile,0x127fc3e172a0,2304,&quot;SetUpRegExp native regexp.js:403&quot;,0x2e87cc519488,
code-creation,LazyCompile,0x127fc3e17ba0,292,&quot;SetUpRegExp.a native regexp.js:422&quot;,0x2e87cc519540,
code-creation,LazyCompile,0x127fc3e17ce0,256,&quot;SetUpRegExp.c native regexp.js:426&quot;,0x2e87cc519658,
</pre>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn"><a href="/about" title="About the author (Mark Daggett)" rel="author">Mark Daggett</a></span></span>

      








  


<time datetime="2013-03-01T09:08:00-06:00" pubdate data-updated="true">Mar 1<span>st</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/javascript/'>JavaScript</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://heavysixer.github.com/blog/2013/03/01/racing-and-profiling/" data-via="" data-counturl="http://heavysixer.github.com/blog/2013/03/01/racing-and-profiling/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/02/27/javascript-parsetrees/" title="Previous Post: Javascript ParseTrees">&laquo; Javascript ParseTrees</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/03/04/dynamic-spotlight-effect-using-css-and-javascript/" title="next Post: Dynamic Spotlight Effect Using CSS and JavaScript">Dynamic Spotlight Effect Using CSS and JavaScript &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Mark Daggett -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'markdaggettcom';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://heavysixer.github.com/blog/2013/03/01/racing-and-profiling/';
        var disqus_url = 'http://heavysixer.github.com/blog/2013/03/01/racing-and-profiling/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
